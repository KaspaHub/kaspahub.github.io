<!DOCTYPE html>
<html lang="en" id="">

<head>
<script>document.documentElement.id = localStorage.getItem('dark') !== null ? 'dark' : 'light';</script>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#000000" />
<link rel="stylesheet" type="text/css" href="/assets/styles/main.css" />
<link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/assets/fonts/mulish.woff2" />
<link rel="icon" type="image/x-icon" href="/favicon.ico" />
<link rel="manifest" href="/assets/manifest.json" />

<title>Create a Kaspa Crypto Donation Page - Kaspa Hub</title>
<meta name="twitter:title" content="Create Nostr Account - Kaspa Hub" />
<meta property="og:title" content="Nostr Account Registration with Kaspa Support - Kaspa Hub" />

<meta name="description" content="Create your custom Kaspa cryptocurrency donation page in seconds. Enter your Kaspa wallet address to generate a QR code and shareable donation link. Fast, free, and secure.">
<meta name="twitter:description" content="Easily create your Nostr account and protect your private key. Join the decentralized community today.">
<meta property="og:description" content="Create your Nostr account with one click and save your private key securely. Start connecting across Web3 and Nostr with Kaspa integration.">

<link rel="canonical" href="https://kaspahub.org/nostr/register/" />
<meta name="twitter:url" content="https://kaspahub.org/nostr/register/" />
<meta property="og:url" content="https://kaspahub.org/nostr/register/" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://kaspahub.org/assets/logo.jpg" />
<meta property="og:image" content="https://kaspahub.org/assets/logo.jpg" />

<meta name="twitter:site" content="@KaspaHub" />
<meta name="twitter:creator" content="@KaspaHub" />
<meta name="kaspa:title" content="Thanks for being here - your support is appreciated more than you know." />
<meta name="kaspa:wallet" content="kaspa:qpuj2l703xauvsk8z7n9repf79s590j3fh9u83m5yetfmt9k5km7zsp3mc3j5" />

<style type="text/css">
  .section { margin-bottom: 20px; }
  label { display: block; margin: 5px 0; }
  .button { margin: 15px 0; padding: 7px 15px; }
  #status { color: green; }
  #error { color: red; margin-top: 10px; }
  .hidden { display: none; }
</style>

</head>

<body>

<nav id="navBar"><input id="menu" type="button" aria-label="Menu Toggle" onclick="menu()" /><a id="title" href="/">Kaspa Hub</a><input id="theme" type="checkbox" aria-label="Theme Toggle" onclick="theme()" /></nav><script async src="/assets/scripts/main.js"></script>

<main id="container-1">

<section class="theme-1">

  <div id="register-section" class="section">
    <h2>Create Account</h2>
    <p>Welcome! Create your account to get started.<br>Click below to generate your Nostr private key.</p>
    <button onclick="generateKeys()" class="button">Create Account</button>
    <p>Already have a Nostr account? <a href="/nostr/edit/">Login now</a></p>
    <div id="error"></div>
  </div>

  <div id="key-section" class="section hidden">

    <h2>Your Private Key</h2>
    <p><strong>Save this key securely!</strong><br>You'll need it to log in to your Nostr account. Do not share it with anyone.</p>
    <pre id="private-key-display" style="width: 100%;"></pre>

    <div>
    <input type="checkbox" id="key-saved">
    <label for="key-saved">I have saved my private key</label>
    </div>

    <div id="status"></div>

    <div style="display: flex; flex-direction: row; justify-content: space-between;">
    <button onclick="copyKey()" class="button" id="copy">Copy Key</button>
    <a href="/nostr/edit/" id="login-link" class="button" style="opacity: 0.5; pointer-events: none;">Proceed to Login</a>
    </div>
  
  </div>

</section>

</main>
<footer><a href="https://kaspahub.org/">Kaspa Community Hub</a></footer>
<script src="https://unpkg.com/nostr-tools@2.7.2/lib/nostr.bundle.js"></script>
<script type="text/javascript">
  let privateKey;
  let nsecKey;

  function generateKeys() {
    const errorDiv = document.getElementById('error');
    const statusDiv = document.getElementById('status');
    errorDiv.textContent = '';
    statusDiv.textContent = '';

    try {
      privateKey = window.NostrTools.generateSecretKey();
      nsecKey = window.NostrTools.nip19.nsecEncode(privateKey);
      document.getElementById('private-key-display').textContent = nsecKey;
      document.getElementById('register-section').classList.add('hidden');
      document.getElementById('key-section').classList.remove('hidden');
      document.getElementById('key-saved').addEventListener('change', updateLoginButton);
    } catch (err) {
      errorDiv.textContent = 'Error generating keys: ' + err.message;
      console.error('Key generation error:', err);
    }
  }

function copyKey() {
  const copyButton = document.getElementById('copy');
  const statusDiv = document.getElementById('status');
  const errorDiv = document.getElementById('error');
  statusDiv.textContent = '';
  errorDiv.textContent = '';

  try {
    navigator.clipboard.writeText(nsecKey).then(() => {
      const originalText = copyButton.textContent;
      copyButton.textContent = 'Copied!';
      setTimeout(() => {
        copyButton.textContent = originalText;
      }, 1500);
    }).catch(err => {
      errorDiv.textContent = 'Failed to copy key: ' + err.message;
      console.error('Copy error:', err);
    });
  } catch (err) {
    errorDiv.textContent = 'Error accessing clipboard: ' + err.message;
    console.error('Clipboard error:', err);
  }
}

    function updateLoginButton() {
      const loginLink = document.getElementById('login-link');
      const checkbox = document.getElementById('key-saved');
      loginLink.style.opacity = checkbox.checked ? '1' : '0.5';
      loginLink.style.pointerEvents = checkbox.checked ? 'auto' : 'none';
    }
  </script>
</body>
</html>